(()=>{var e={27:(e,t,n)=>{e.exports=p,p.Minimatch=f;var o=function(){try{return n(928)}catch(e){}}()||{sep:"/"};p.sep=o.sep;var r=p.GLOBSTAR=f.GLOBSTAR={},i=n(547),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="[^/]",c=a+"*?",l="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{}),u=/\/+/;function d(e,t){t=t||{};var n={};return Object.keys(e).forEach((function(t){n[t]=e[t]})),Object.keys(t).forEach((function(e){n[e]=t[e]})),n}function p(e,t,n){return g(t),n||(n={}),!(!n.nocomment&&"#"===t.charAt(0))&&new f(t,n).match(e)}function f(e,t){if(!(this instanceof f))return new f(e,t);g(e),t||(t={}),e=e.trim(),t.allowWindowsEscape||"/"===o.sep||(e=e.split(o.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}function h(e,t){return t||(t=this instanceof f?this.options:{}),e=void 0===e?this.pattern:e,g(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:i(e)}p.filter=function(e,t){return t=t||{},function(n,o,r){return p(n,e,t)}},p.defaults=function(e){if(!e||"object"!=typeof e||!Object.keys(e).length)return p;var t=p,n=function(n,o,r){return t(n,o,d(e,r))};return(n.Minimatch=function(n,o){return new t.Minimatch(n,d(e,o))}).defaults=function(n){return t.defaults(d(e,n)).Minimatch},n.filter=function(n,o){return t.filter(n,d(e,o))},n.defaults=function(n){return t.defaults(d(e,n))},n.makeRe=function(n,o){return t.makeRe(n,d(e,o))},n.braceExpand=function(n,o){return t.braceExpand(n,d(e,o))},n.match=function(n,o,r){return t.match(n,o,d(e,r))},n},f.defaults=function(e){return p.defaults(e).Minimatch},f.prototype.debug=function(){},f.prototype.make=function(){var e=this.pattern,t=this.options;if(t.nocomment||"#"!==e.charAt(0))if(e){this.parseNegate();var n=this.globSet=this.braceExpand();t.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,n),n=this.globParts=n.map((function(e){return e.split(u)})),this.debug(this.pattern,n),n=n.map((function(e,t,n){return e.map(this.parse,this)}),this),this.debug(this.pattern,n),n=n.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,n),this.set=n}else this.empty=!0;else this.comment=!0},f.prototype.parseNegate=function(){var e=this.pattern,t=!1,n=0;if(!this.options.nonegate){for(var o=0,r=e.length;o<r&&"!"===e.charAt(o);o++)t=!t,n++;n&&(this.pattern=e.substr(n)),this.negate=t}},p.braceExpand=function(e,t){return h(e,t)},f.prototype.braceExpand=h;var g=function(e){if("string"!=typeof e)throw new TypeError("invalid pattern");if(e.length>65536)throw new TypeError("pattern is too long")};f.prototype.parse=function(e,t){g(e);var n=this.options;if("**"===e){if(!n.noglobstar)return r;e="*"}if(""===e)return"";var o,i="",u=!!n.nocase,d=!1,p=[],f=[],h=!1,b=-1,w=-1,m="."===e.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",x=this;function y(){if(o){switch(o){case"*":i+=c,u=!0;break;case"?":i+=a,u=!0;break;default:i+="\\"+o}x.debug("clearStateChar %j %j",o,i),o=!1}}for(var _,j=0,P=e.length;j<P&&(_=e.charAt(j));j++)if(this.debug("%s\t%s %s %j",e,j,i,_),d&&l[_])i+="\\"+_,d=!1;else switch(_){case"/":return!1;case"\\":y(),d=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,j,i,_),h){this.debug("  in class"),"!"===_&&j===w+1&&(_="^"),i+=_;continue}x.debug("call clearStateChar %j",o),y(),o=_,n.noext&&y();continue;case"(":if(h){i+="(";continue}if(!o){i+="\\(";continue}p.push({type:o,start:j-1,reStart:i.length,open:s[o].open,close:s[o].close}),i+="!"===o?"(?:(?!(?:":"(?:",this.debug("plType %j %j",o,i),o=!1;continue;case")":if(h||!p.length){i+="\\)";continue}y(),u=!0;var k=p.pop();i+=k.close,"!"===k.type&&f.push(k),k.reEnd=i.length;continue;case"|":if(h||!p.length||d){i+="\\|",d=!1;continue}y(),i+="|";continue;case"[":if(y(),h){i+="\\"+_;continue}h=!0,w=j,b=i.length,i+=_;continue;case"]":if(j===w+1||!h){i+="\\"+_,d=!1;continue}var C=e.substring(w+1,j);try{RegExp("["+C+"]")}catch(e){var O=this.parse(C,v);i=i.substr(0,b)+"\\["+O[0]+"\\]",u=u||O[1],h=!1;continue}u=!0,h=!1,i+=_;continue;default:y(),d?d=!1:!l[_]||"^"===_&&h||(i+="\\"),i+=_}for(h&&(C=e.substr(w+1),O=this.parse(C,v),i=i.substr(0,b)+"\\["+O[0],u=u||O[1]),k=p.pop();k;k=p.pop()){var E=i.slice(k.reStart+k.open.length);this.debug("setting tail",i,k),E=E.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,n){return n||(n="\\"),t+t+n+"|"})),this.debug("tail=%j\n   %s",E,E,k,i);var S="*"===k.type?c:"?"===k.type?a:"\\"+k.type;u=!0,i=i.slice(0,k.reStart)+S+"\\("+E}y(),d&&(i+="\\\\");var M=!1;switch(i.charAt(0)){case"[":case".":case"(":M=!0}for(var $=f.length-1;$>-1;$--){var F=f[$],T=i.slice(0,F.reStart),W=i.slice(F.reStart,F.reEnd-8),R=i.slice(F.reEnd-8,F.reEnd),A=i.slice(F.reEnd);R+=A;var N=T.split("(").length-1,z=A;for(j=0;j<N;j++)z=z.replace(/\)[+*?]?/,"");var D="";""===(A=z)&&t!==v&&(D="$"),i=T+W+A+D+R}if(""!==i&&u&&(i="(?=.)"+i),M&&(i=m+i),t===v)return[i,u];if(!u)return e.replace(/\\(.)/g,"$1");var I=n.nocase?"i":"";try{var B=new RegExp("^"+i+"$",I)}catch(e){return new RegExp("$.")}return B._glob=e,B._src=i,B};var v={};p.makeRe=function(e,t){return new f(e,t||{}).makeRe()},f.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,n=t.noglobstar?c:t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",o=t.nocase?"i":"",i=e.map((function(e){return e.map((function(e){return e===r?n:"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):e._src})).join("\\/")})).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,o)}catch(e){this.regexp=!1}return this.regexp},p.match=function(e,t,n){var o=new f(t,n=n||{});return e=e.filter((function(e){return o.match(e)})),o.options.nonull&&!e.length&&e.push(t),e},f.prototype.match=function(e,t){if(void 0===t&&(t=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var n=this.options;"/"!==o.sep&&(e=e.split(o.sep).join("/")),e=e.split(u),this.debug(this.pattern,"split",e);var r,i,s=this.set;for(this.debug(this.pattern,"set",s),i=e.length-1;i>=0&&!(r=e[i]);i--);for(i=0;i<s.length;i++){var a=s[i],c=e;if(n.matchBase&&1===a.length&&(c=[r]),this.matchOne(c,a,t))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate},f.prototype.matchOne=function(e,t,n){var o=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var i=0,s=0,a=e.length,c=t.length;i<a&&s<c;i++,s++){this.debug("matchOne loop");var l,u=t[s],d=e[i];if(this.debug(t,u,d),!1===u)return!1;if(u===r){this.debug("GLOBSTAR",[t,u,d]);var p=i,f=s+1;if(f===c){for(this.debug("** at the end");i<a;i++)if("."===e[i]||".."===e[i]||!o.dot&&"."===e[i].charAt(0))return!1;return!0}for(;p<a;){var h=e[p];if(this.debug("\nglobstar while",e,p,t,f,h),this.matchOne(e.slice(p),t.slice(f),n))return this.debug("globstar found match!",p,a,h),!0;if("."===h||".."===h||!o.dot&&"."===h.charAt(0)){this.debug("dot detected!",e,p,t,f);break}this.debug("globstar swallow a segment, and continue"),p++}return!(!n||(this.debug("\n>>> no match, partial?",e,p,t,f),p!==a))}if("string"==typeof u?(l=d===u,this.debug("string match",u,d,l)):(l=d.match(u),this.debug("pattern match",u,d,l)),!l)return!1}if(i===a&&s===c)return!0;if(i===a)return n;if(s===c)return i===a-1&&""===e[i];throw new Error("wtf?")}},39:function(e,t,n){"use strict";var o,r=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&r(t,e,n[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.getGitignoreFilter=async function(e){return p||(p=new d,await p.initialize(e)),p};const a=s(n(928)),c=s(n(896)),l=s(n(398)),u=n(27);class d{constructor(){this.patterns=[],this.workspaceFolders=[]}async initialize(e){this.workspaceFolders=e||[],this.patterns=[];const t=l.workspace.getConfiguration("projectSession.search").get("excludePatterns")||[];for(const e of t)this.patterns.push({basePath:"",pattern:e});for(const e of this.workspaceFolders)await this._loadGitignorePatterns(e.uri.fsPath);console.log(`Loaded ${this.patterns.length} gitignore patterns (including ${t.length} from settings)`)}async _loadGitignorePatterns(e){try{const t=a.join(e,".gitignore");let n=!1;try{await c.promises.access(t,c.constants.R_OK),n=!0}catch(e){console.log(`No .gitignore found at ${t}`)}if(n){const n=(await c.promises.readFile(t,"utf8")).split(/\r?\n/);for(let t of n)t=t.trim(),t&&!t.startsWith("#")&&(console.log(`Adding gitignore pattern: '${t}' from ${e}`),this.patterns.push({basePath:e,pattern:t}))}}catch(e){console.error("Error loading gitignore patterns:",e)}}shouldExclude(e){if(0===this.patterns.length)return!1;let t=null;for(const n of this.workspaceFolders)if(e.startsWith(n.uri.fsPath)){t=n.uri.fsPath;break}if(!t)return!1;const n=a.relative(t,e).replace(/\\/g,"/");for(const{pattern:e}of this.patterns)if(e.endsWith("/")){const t=e.slice(0,-1);if(n===t||n.startsWith(`${t}/`)||n.includes(`/${t}/`))return console.log(`File ${n} excluded by directory pattern: ${e}`),!0}for(const{basePath:t,pattern:o}of this.patterns)if(""===t||e.startsWith(t)){let e=o,t=!1;o.startsWith("!")&&(t=!0,e=o.slice(1));let r=!1;e.endsWith("/")&&(r=!0,e=e.slice(0,-1)),e.includes("/")?e.startsWith("/")&&(e=e.slice(1)):(e=`**/${e}`,r&&(e+="/**"));try{const o=u(n,e,{dot:!0});if(o&&!t)return console.log(`File ${n} excluded by pattern: ${e}`),!0;if(o&&t)return!1}catch(t){console.error(`Error matching pattern ${e}:`,t)}}return!1}filterUris(e){return e&&e.length?e.filter((e=>!this.shouldExclude(e.fsPath))):[]}containsGitIgnoredSegment(e){const t=l.workspace.getConfiguration("projectSession.search").get("excludePatterns")||[],n=new Set(["node_modules",".git","dist","build",".next",".cache"]);for(const e of t){const t=e.match(/(?:\*\*\/)?([\w.-]+)(?:\/\*\*)?/);t&&t[1]&&n.add(t[1])}for(const{pattern:e}of this.patterns)if(e.endsWith("/")){const t=e.slice(0,-1);n.add(t)}const o=e.replace(/\\/g,"/");for(const e of n)if(new RegExp(`\\/${e}\\/`,"i").test(o))return o.includes("/resources/")?(console.log(`File ${o} is in resources/ directory, should be excluded`),!0):(console.log(`File ${o} contains ignored segment: ${e}`),!0);return!!o.includes("/resources/")&&(console.log(`File ${o} is in resources/ directory (special check), should be excluded`),!0)}}let p=null},125:function(e,t,n){"use strict";var o,r=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&r(t,e,n[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectSessionWebviewProvider=void 0;const a=s(n(398)),c=s(n(928)),l=n(411),u=n(39);t.ProjectSessionWebviewProvider=class{constructor(e,t){this._extensionUri=e,this._session=t}resolveWebviewView(e,t,n){console.log("Webview view resolved"),this._view=e;try{e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(e.webview),e.webview.onDidReceiveMessage((e=>{try{switch(console.log("Received message from webview:",e.type),e.type){case"getContextFiles":this.sendContextFilesToWebview();break;case"clearContext":this._clearContext();break;case"removeContextFile":this._removeContextFile(e.payload);break;case"openFile":this._openFile(e.payload);break;case"searchWorkspaceFiles":this._searchWorkspaceFiles(e.payload);break;case"addFileToContext":this._addFileToContext(e.payload);break;default:console.log("Unknown message type:",e.type)}}catch(e){console.error("Error handling message:",e),a.window.showErrorMessage(`Error in Project Session Manager: ${e instanceof Error?e.message:String(e)}`)}})),setTimeout((()=>{this.sendContextFilesToWebview()}),500)}catch(e){console.error("Error initializing webview:",e),a.window.showErrorMessage(`Failed to initialize Project Session Manager: ${e instanceof Error?e.message:String(e)}`)}}sendContextFilesToWebview(){try{if(this._view&&this._view.webview){const e=this._session.context_file_lists.map(((e,t)=>({...e,id:t})));console.log(`Sending ${e.length} files to webview`),this._view.webview.postMessage({type:"updateContextFiles",payload:e}).then((()=>{console.log("Context files message sent successfully")}),(e=>{console.error("Failed to send context files to webview:",e)}))}else console.log("Cannot update webview: view is undefined or webview is not ready")}catch(e){console.error("Error sending context files to webview:",e),a.window.showErrorMessage(`Error updating Project Session Manager: ${e instanceof Error?e.message:String(e)}`)}}_clearContext(){this._session.context_file_lists=[],a.window.showInformationMessage("Context cleared"),this.sendContextFilesToWebview()}_removeContextFile(e){if(e>=0&&e<this._session.context_file_lists.length){const t=this._session.context_file_lists.splice(e,1)[0];a.window.showInformationMessage(`Removed ${t.file_name} from context`),this.sendContextFilesToWebview()}}async _searchWorkspaceFiles(e){if(e&&""!==e.trim())try{const t=a.workspace.workspaceFolders;if(!t)return;const n=await(0,u.getGitignoreFilter)(t),o=await a.workspace.findFiles("**/*");console.log(`Found ${o.length} files before filtering`);const r=o.filter((t=>{const o=c.basename(t.fsPath),r=t.fsPath;return!(!o.toLowerCase().includes(e.toLowerCase())&&!r.toLowerCase().includes(e.toLowerCase()))&&(r.includes("resources")?(console.log(`Found file in resources directory: ${r}`),!1):n.shouldExclude(r)?(console.log(`Excluding file based on gitignore: ${r}`),!1):!n.containsGitIgnoredSegment(r)||(console.log(`Excluding file based on common ignored directory: ${r}`),!1))})).slice(0,10).map((e=>({fileName:c.basename(e.fsPath),fullPath:e.fsPath})));console.log(`Search results for "${e}": ${r.length} files (after gitignore filtering)`),this._view&&this._view.webview.postMessage({type:"fileSearchResults",payload:r})}catch(e){console.error("Error searching files:",e),this._view&&this._view.webview.postMessage({type:"fileSearchResults",payload:[]})}else this._view&&this._view.webview.postMessage({type:"fileSearchResults",payload:[]})}async _addFileToContext(e){try{const t=e.fullPath,n=c.basename(t);if(this._session.context_file_lists.some((e=>e.fullPath===t&&e.fullCode)))return void a.window.showInformationMessage(`${n} is already in the context`);const o=await a.workspace.openTextDocument(t),r=o.getText(),i=new l.ContextFile(n,t,r,0,o.lineCount-1,!0);this._session.context_file_lists.push(i),a.window.showInformationMessage(`Added ${n} to context`),this.sendContextFilesToWebview()}catch(e){console.error("Error adding file to context:",e),a.window.showErrorMessage(`Error adding file to context: ${e instanceof Error?e.message:String(e)}`)}}_openFile(e){const t=e.path,n=e.startLine,o=e.endLine;a.workspace.openTextDocument(t).then((e=>{a.window.showTextDocument(e).then((e=>{const t=new a.Range(new a.Position(n,0),new a.Position(o,0));e.selection=new a.Selection(t.start,t.end),e.revealRange(t)}))}))}_getHtmlForWebview(e){return`<!DOCTYPE html>\n    <html lang="en">\n    <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <title>Project Session Manager</title>\n        <style>\n            body {\n                padding: 0;\n                margin: 0;\n                color: var(--vscode-foreground);\n                font-family: var(--vscode-font-family);\n                background-color: var(--vscode-editor-background);\n                font-size: var(--vscode-font-size);\n            }\n            \n            button {\n                background-color: var(--vscode-button-background);\n                color: var(--vscode-button-foreground);\n                border: none;\n                padding: 4px 8px;\n                cursor: pointer;\n                border-radius: 2px;\n                font-family: var(--vscode-font-family);\n                font-size: var(--vscode-font-size);\n            }\n            \n            button:hover {\n                background-color: var(--vscode-button-hoverBackground);\n            }\n            \n            input {\n                background-color: var(--vscode-input-background);\n                color: var(--vscode-input-foreground);\n                border: 1px solid var(--vscode-input-border);\n                padding: 4px 8px;\n                font-family: var(--vscode-font-family);\n                font-size: var(--vscode-font-size);\n                width: 100%;\n                box-sizing: border-box;\n            }\n            \n            .context-file {\n                padding: 8px;\n                border-bottom: 1px solid var(--vscode-panel-border);\n                cursor: pointer;\n            }\n            \n            .context-file:hover {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n            \n            .context-file-header {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                font-size: var(--vscode-font-size);\n            }\n            \n            .context-file-content {\n                max-height: 150px;\n                overflow: auto;\n                margin-top: 8px;\n                font-family: var(--vscode-editor-font-family);\n                font-size: var(--vscode-editor-font-size);\n                background-color: var(--vscode-editor-background);\n                padding: 4px;\n                border-radius: 2px;\n                white-space: pre;\n            }\n            \n            .empty-state {\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                text-align: center;\n                padding: 20px 12px;\n                background-color: var(--vscode-editor-background);\n                border-radius: 4px;\n                margin: 10px;\n            }\n            \n            .context-files-container {\n                flex: 1;\n                overflow: auto;\n            }\n            \n            .toolbar {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                padding: 4px 8px;\n                background-color: var(--vscode-sideBar-background);\n                border-bottom: 1px solid var(--vscode-panel-border);\n                position: sticky;\n                top: 0;\n            }\n            \n            .file-title {\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n                flex: 1;\n                margin-right: 4px;\n            }\n            \n            .file-actions {\n                display: flex;\n                gap: 4px;\n            }\n            \n            .search-container {\n                padding: 4px 8px;\n                border-bottom: 1px solid var(--vscode-panel-border);\n                position: relative;\n            }\n            \n            .file-search-container {\n                position: relative;\n                width: 100%;\n            }\n            \n            .file-search-dropdown {\n                position: absolute;\n                top: 100%;\n                left: 0;\n                right: 0;\n                z-index: 1000;\n                background-color: var(--vscode-dropdown-background);\n                border: 1px solid var(--vscode-dropdown-border);\n                max-height: 200px;\n                overflow-y: auto;\n                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n            }\n            \n            .file-search-item {\n                padding: 6px 8px;\n                cursor: pointer;\n                border-bottom: 1px solid var(--vscode-panel-border);\n            }\n            \n            .file-search-item:hover {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n            \n            .file-search-item.selected {\n                background-color: var(--vscode-list-activeSelectionBackground);\n                color: var(--vscode-list-activeSelectionForeground);\n            }\n            \n            .file-name {\n                font-weight: bold;\n                margin-bottom: 2px;\n            }\n            \n            .file-path {\n                font-size: 90%;\n                color: var(--vscode-descriptionForeground);\n                white-space: nowrap;\n                overflow: hidden;\n                text-overflow: ellipsis;\n            }\n            \n            .search-loading {\n                padding: 8px;\n                text-align: center;\n                color: var(--vscode-descriptionForeground);\n            }\n        </style>\n    </head>\n    <body>\n        <div id="root"></div>\n        <script src="${e.asWebviewUri(a.Uri.joinPath(this._extensionUri,"webview","dist","bundle.js"))}"><\/script>\n    </body>\n    </html>`}}},265:function(e,t,n){"use strict";var o,r=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&r(t,e,n[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.activate=function(e){console.log("Project Session Manager is now active");let t=a.commands.registerCommand("projectSession.addFileToContext",(()=>async function(){const e=a.window.activeTextEditor;if(!e)return void a.window.showInformationMessage("No file is currently open");const t=e.document,n=t.fileName.split(/[/\\]/).pop()||"",o=t.fileName,r=t.getText();if(console.log(`Adding file to context: ${n}`),p(o,0,t.lineCount-1,!0))return void a.window.showWarningMessage(`${n} is already in the context`);const i=new c.ContextFile(n,o,r,0,t.lineCount-1,!0);u.context_file_lists.push(i),a.window.showInformationMessage(`Added ${n} to context`),console.log(`Current context files: ${u.context_file_lists.length}`),f()}())),n=a.commands.registerCommand("projectSession.addSelectionToContext",(()=>async function(){const e=a.window.activeTextEditor;if(!e)return void a.window.showInformationMessage("No file is currently open");const t=e.selection;if(t.isEmpty)return void a.window.showInformationMessage("No text selected");const n=e.document,o=n.fileName.split(/[/\\]/).pop()||"",r=n.fileName,i=n.getText(t),s=t.start.line,l=t.end.line;if(p(r,s,l,!1))return void a.window.showWarningMessage(`This selection from ${o} is already in the context`);const d=new c.ContextFile(o,r,i,s,l,!1);u.context_file_lists.push(d),a.window.showInformationMessage(`Added selection from ${o} to context`),f()}())),o=a.commands.registerCommand("projectSession.clearContext",(()=>(u.context_file_lists=[],a.window.showInformationMessage("Context cleared"),void f())));d=new l.ProjectSessionWebviewProvider(e.extensionUri,u),e.subscriptions.push(a.window.registerWebviewViewProvider("projectSessionExplorer",d)),e.subscriptions.push(a.commands.registerCommand("projectSession.removeContextFile",(e=>{!function(e){if(e>=0&&e<u.context_file_lists.length){const t=u.context_file_lists.splice(e,1)[0];a.window.showInformationMessage(`Removed ${t.file_name} from context`),f()}}(parseInt(e))}))),e.subscriptions.push(a.window.onDidChangeActiveTextEditor(g)),e.subscriptions.push(a.workspace.onDidOpenTextDocument(h)),e.subscriptions.push(a.workspace.onDidCloseTextDocument(h)),h(),g(a.window.activeTextEditor),e.subscriptions.push(t),e.subscriptions.push(n),e.subscriptions.push(o)},t.deactivate=function(){console.log("Project Session Manager deactivated")};const a=s(n(398)),c=n(411),l=n(125);let u=new c.ProjectSession,d=null;function p(e,t,n,o){return u.context_file_lists.some((r=>o&&r.fullCode?r.fullPath===e:!o&&r.fullPath===e&&(t<=r.end_line&&n>=r.start_line||r.start_line<=n&&r.end_line>=t)))}function f(e){console.log("Updating webview..."),d?(console.log("Provider found, sending update"),d.sendContextFilesToWebview()):console.log("No provider found! Cannot update webview.")}function h(e){u.opening_tabs=a.workspace.textDocuments.filter((e=>!e.isUntitled)).map((e=>e.fileName.split(/[/\\]/).pop()||""))}function g(e){u.curTab=e?e.document.fileName.split(/[/\\]/).pop()||"":null}},398:e=>{"use strict";e.exports=require("vscode")},411:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextFile=t.ProjectSession=void 0,t.ProjectSession=class{constructor(){this.opening_tabs=[],this.curTab=null,this.context_file_lists=[]}},t.ContextFile=class{constructor(e,t,n,o,r,i){this.file_name=e,this.fullPath=t,this.content=n,this.start_line=o,this.end_line=r,this.fullCode=i}}},505:e=>{"use strict";function t(e,t,r){e instanceof RegExp&&(e=n(e,r)),t instanceof RegExp&&(t=n(t,r));var i=o(e,t,r);return i&&{start:i[0],end:i[1],pre:r.slice(0,i[0]),body:r.slice(i[0]+e.length,i[1]),post:r.slice(i[1]+t.length)}}function n(e,t){var n=t.match(e);return n?n[0]:null}function o(e,t,n){var o,r,i,s,a,c=n.indexOf(e),l=n.indexOf(t,c+1),u=c;if(c>=0&&l>0){if(e===t)return[c,l];for(o=[],i=n.length;u>=0&&!a;)u==c?(o.push(u),c=n.indexOf(e,u+1)):1==o.length?a=[o.pop(),l]:((r=o.pop())<i&&(i=r,s=l),l=n.indexOf(t,u+1)),u=c<l&&c>=0?c:l;o.length&&(a=[i,s])}return a}e.exports=t,t.range=o},547:(e,t,n)=>{var o=n(818),r=n(505);e.exports=function(e){return e?("{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2)),b(function(e){return e.split("\\\\").join(i).split("\\{").join(s).split("\\}").join(a).split("\\,").join(c).split("\\.").join(l)}(e),!0).map(d)):[]};var i="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",l="\0PERIOD"+Math.random()+"\0";function u(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function d(e){return e.split(i).join("\\").split(s).join("{").split(a).join("}").split(c).join(",").split(l).join(".")}function p(e){if(!e)return[""];var t=[],n=r("{","}",e);if(!n)return e.split(",");var o=n.pre,i=n.body,s=n.post,a=o.split(",");a[a.length-1]+="{"+i+"}";var c=p(s);return s.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),t.push.apply(t,a),t}function f(e){return"{"+e+"}"}function h(e){return/^-?0\d/.test(e)}function g(e,t){return e<=t}function v(e,t){return e>=t}function b(e,t){var n=[],i=r("{","}",e);if(!i||/\$$/.test(i.pre))return[e];var s,c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),d=c||l,w=i.body.indexOf(",")>=0;if(!d&&!w)return i.post.match(/,.*\}/)?b(e=i.pre+"{"+i.body+a+i.post):[e];if(d)s=i.body.split(/\.\./);else if(1===(s=p(i.body)).length&&1===(s=b(s[0],!1).map(f)).length)return(y=i.post.length?b(i.post,!1):[""]).map((function(e){return i.pre+s[0]+e}));var m,x=i.pre,y=i.post.length?b(i.post,!1):[""];if(d){var _=u(s[0]),j=u(s[1]),P=Math.max(s[0].length,s[1].length),k=3==s.length?Math.abs(u(s[2])):1,C=g;j<_&&(k*=-1,C=v);var O=s.some(h);m=[];for(var E=_;C(E,j);E+=k){var S;if(l)"\\"===(S=String.fromCharCode(E))&&(S="");else if(S=String(E),O){var M=P-S.length;if(M>0){var $=new Array(M+1).join("0");S=E<0?"-"+$+S.slice(1):$+S}}m.push(S)}}else m=o(s,(function(e){return b(e,!1)}));for(var F=0;F<m.length;F++)for(var T=0;T<y.length;T++){var W=x+m[F]+y[T];(!t||d||W)&&n.push(W)}return n}},818:e=>{e.exports=function(e,n){for(var o=[],r=0;r<e.length;r++){var i=n(e[r],r);t(i)?o.push.apply(o,i):o.push(i)}return o};var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},896:e=>{"use strict";e.exports=require("fs")},928:e=>{"use strict";e.exports=require("path")}},t={},n=function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}(265);module.exports=n})();
//# sourceMappingURL=extension.js.map